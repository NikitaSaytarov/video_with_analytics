(this.webpackJsonpvideo_and_analytics=this.webpackJsonpvideo_and_analytics||[]).push([[0],{125:function(e,t,n){e.exports=function(){return new Worker(n.p+"e15fb2c74a5d5a53888c.worker.js")}},126:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n(0),a=n.n(c),i=n(27),o=n.n(i),s=n(142),u=n(8),l=n(24),f=n(10),d=n(39),p=n(32),h=n.n(p),b=Object(d.b)({name:"analytics",initialState:{events:[],fetchEventsFailedMessage:null,fetchEventsUrl:"http://www.mocky.io/v2/5e60c5f53300005fcc97bbdd",activeEvents:[],selectedEvent:null},reducers:{allEventsFetchRequest:function(e,t){return h()(e,{fetchEventsUrl:{$set:t.payload}})},allEventsFetchSuccess:function(e,t){return h()(e,{events:{$set:t.payload},fetchEventsFailedMessage:{$set:null}})},allEventsFetchFail:function(e,t){return h()(e,{fetchEventsFailedMessage:{$set:t.payload}})},activeEventsSet:function(e,t){return h()(e,{activeEvents:{$set:t.payload}})},eventSelected:function(e,t){return h()(e,{selectedEvent:{$set:t.payload}})}}}),j=function(e){return e.analytics.events},v=function(e){return e.analytics.activeEvents},m=function(e){return e.analytics.fetchEventsFailedMessage},O=b.actions,y=b.reducer,w=O.allEventsFetchSuccess,g=O.allEventsFetchFail,x=O.activeEventsSet,E=O.allEventsFetchRequest,k=O.eventSelected,_=y,S=function(){return Object(f.c)({analytics:_})},C=n(17),R=(n(66),function(){return{}}),I=n(80),F=n(3),N=n.n(F),P=n(7),z=n(69),T=n(67),M=n.n(T),$=n(68),A=n.n($),B=function(e){return M.a.get(e).then((function(e){return e.data.map((function(e){var t=e,n=new Date(t.timestamp);return t.title=A()(n).format("mm:ss:SSS"),t})).sort((function(e,t){return e.timestamp-t.timestamp}))}))},D=N.a.mark(H);function H(e){var t;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(z.a)(B,e.payload);case 3:return t=n.sent,n.next=6,Object(P.n)(w(t));case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(0),console.error(n.t0),n.next=13,Object(P.n)(g(n.t0));case 13:case"end":return n.stop()}}),D,null,[[0,8]])}var L=N.a.mark(U);function U(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.v)(E,H);case 2:case"end":return e.stop()}}),L)}var G=Object(I.a)(),W=[].concat(Object(l.a)(Object(d.c)({thunk:!1})),[G]);window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d;var q=Object(d.a)({reducer:S(),preloadedState:R(),middleware:W,devTools:false});G.run(U);var J,V=function(){return Object(C.b)()},X=n(150),K=u.default.div.withConfig({displayName:"style__EventsPanel",componentId:"sc-1nw2x2m-0"})(["margin:12px;"]),Q=Object(u.default)(X.a).withConfig({displayName:"style__EventLink",componentId:"sc-1nw2x2m-1"})(["cursor:pointer;"]),Y=(u.default.div.withConfig({displayName:"style__EventFetchErrorContainer",componentId:"sc-1nw2x2m-2"})(["cursor:pointer;visibility:",";"],(function(e){return e.isActive?"visible":"hidden"})),Object(u.withTheme)((function(e){var t=V(),n=Object(C.c)(j);Object(C.c)(m);return Object(r.jsx)("div",{children:Object(r.jsx)(K,{children:n.map((function(e,n){return Object(r.jsx)(Q,{onClick:function(){return function(e){t(k(e))}(e)},component:"button",variant:"body2",rel:"noreferrer",children:e.title+", "})}))})})}))),Z=n(12),ee=n(76),te=n.n(ee),ne=n(18),re=n(44),ce=function(e,t,n,r){var c=t.getContext("2d");c.lineWidth=3,c.strokeStyle="green";var a,i=Object(re.a)(e);try{for(i.s();!(a=i.n()).done;){var o=a.value.zone,s=o.left/n.width,u=o.top/n.height,l=o.width/n.width,f=o.height/n.height,d=s*r.width,p=u*r.height,h=l*r.width,b=f*r.height;c.strokeRect(d,p,h,b)}}catch(j){i.e(j)}finally{i.f()}},ae=n(144),ie=Object(u.default)(ae.a).withConfig({displayName:"style__VideoEventsLayerContainer",componentId:"sc-7o072f-0"})(["height:360px;width:100%;position:absolute;pointer-events:none;top:0;left:0"]),oe=u.default.canvas.withConfig({displayName:"style__StyledCanvas",componentId:"sc-7o072f-1"})(["height:100%;width:100%;outline:none;display:block;margin:0;padding:0;touch-action:none;"]),se=Object(c.forwardRef)((function(e,t){Object(c.useImperativeHandle)(t,(function(){return{initialize:d}}));var n=Object(c.useRef)(null),a=Object(c.useState)({player:null,videoResolution:{height:0,width:0}}),i=Object(ne.a)(a,2),o=i[0],s=i[1],u=o.player,l=o.videoResolution,f=Object(C.c)(v),d=function(){var e=Object(Z.a)(N.a.mark((function e(t,r){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({player:t,videoResolution:r}),(c=n.current).setAttribute("width","640"),c.setAttribute("height","360");case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();if(f){var p=n.current;if(function(e){e&&e.getContext("2d").clearRect(0,0,e.width,e.height)}(p),f.length>0){var h=u.props,b=h.height,j=h.width,m=+b.substring(0,b.length-2),O=+j.substring(0,j.length-2);ce(f,p,l,{height:m,width:O})}}return Object(r.jsx)(ie,{children:Object(r.jsx)(oe,{ref:n})})})),ue="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",le=function(e){return new Promise(function(){var t=Object(Z.a)(N.a.mark((function t(n,r){var c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(c=document.createElement("video")).onloadedmetadata=function(){n({width:c.videoWidth,height:c.videoHeight})},c.src=e;case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},fe=n(48),de=n(33),pe=Object(c.forwardRef)((function(e,t){var n=Object(C.c)(j),i=V();Object(c.useImperativeHandle)(t,(function(){return{initialize:f,onEnded:h,onPause:p,onPlay:d,onSeek:b}}));var o=Object(c.useState)({player:null}),s=Object(ne.a)(o,2),u=s[0],l=s[1],f=(u.player,function(){var e=Object(Z.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l({player:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d=function(){var e=Object(Z.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.play)();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(Z.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.pause)();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(Z.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.ended)();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(Z.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.seek)(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){if(e&&e.length>0){var t=n.filter((function(t){return e.includes(t.id)}));i(x(t))}else i(x([]))};function m(){return(m=Object(Z.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n,e.next=3,Object(de.initializeAnalysis)(t,fe.proxy(v));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n&&0!==n.length&&function(){m.apply(this,arguments)}(),Object(r.jsx)(a.a.Fragment,{})})),he=Object(c.forwardRef)((function(e,t){var n=Object(C.c)((function(e){return e.analytics.selectedEvent})),i=V();Object(c.useImperativeHandle)(t,(function(){return{initialize:d}}));var o=Object(c.useState)({player:null}),s=Object(ne.a)(o,2),u=s[0],l=s[1],f=u.player,d=function(){var e=Object(Z.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l({player:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(f&&n){var p=n.timestamp/1e3;f.seekTo(p,"seconds"),i(k(null))}return Object(r.jsx)(a.a.Fragment,{})})),be=u.default.div.withConfig({displayName:"style__PlayerContainer",componentId:"sc-105rdl4-0"})(["position:relative;"]),je=Object(u.withTheme)((function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null),a=Object(c.useRef)(null),i=Object(c.useRef)(null);Object(c.useEffect)((function(){(function(){var e=Object(Z.a)(N.a.mark((function e(){var r,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(ue);case 2:r=e.sent,(c=t.current)&&(n.current&&n.current.initialize(c,r),a.current&&a.current.initialize(c,r),i.current&&i.current.initialize(c,r));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return Object(r.jsxs)(be,{children:[Object(r.jsx)(te.a,{config:{file:{attributes:{onContextMenu:function(e){return e.preventDefault()},disablepictureinpicture:"true",controlsList:"nodownload nofullscreen noremoteplayback"}}},pip:!1,url:ue,controls:!0,playing:!0,onPlay:function(){i.current&&i.current.onPlay()},onPause:function(){i.current&&i.current.onPause()},onSeek:function(e){i.current&&i.current.onSeek(e)},onEnded:function(){i.current&&i.current.onEnded()},ref:t}),Object(r.jsx)(pe,{ref:i}),Object(r.jsx)(he,{ref:n}),Object(r.jsx)(se,{ref:a})]})})),ve=n(145);!function(e){e[e.green=0]="green",e[e.blue=1]="blue"}(J||(J={}));var me=n(149),Oe=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return Object(me.a)(["theme","app"].concat(Object(l.a)(e)),t)}}(["colors","main",J[e]])},ye=u.default.div.withConfig({displayName:"style__Root",componentId:"sc-11l1atm-0"})(["background:",";min-height:100vh;flex-grow:1;padding:24px;"],Oe(J.green)),we=Object(u.default)(ae.a).withConfig({displayName:"style__RootGrid",componentId:"sc-11l1atm-1"})(["align-items:center;justify-content:center;min-height:100vh;"]),ge=Object(u.default)(ae.a).withConfig({displayName:"style__SectionGrid",componentId:"sc-11l1atm-2"})(["align-content:center;"]),xe=Object(u.default)(ve.a).withConfig({displayName:"style__RootPaper",componentId:"sc-11l1atm-3"})(["padding:16px;text-align:center;vertical-align:middle;color:",";height:390px;"],Oe(J.blue)),Ee=u.default.div.withConfig({displayName:"style__PlayerContainer",componentId:"sc-11l1atm-4"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;"]),ke=Object(u.withTheme)((function(e){var t=V();return Object(c.useEffect)((function(){t(E("https://www.mocky.io/v2/5e60c5f53300005fcc97bbdd"))})),Object(r.jsx)(ye,{children:Object(r.jsxs)(we,{container:!0,spacing:3,children:[Object(r.jsx)(ge,{item:!0,xs:6,children:Object(r.jsxs)(xe,{children:[Object(r.jsx)(s.a,{variant:"h5",children:"Analytics events"}),Object(r.jsx)(Y,{})]})}),Object(r.jsx)(ge,{item:!0,xs:6,children:Object(r.jsx)(xe,{children:Object(r.jsx)(Ee,{children:Object(r.jsx)(je,{})})})})]})})})),_e=n(77),Se=n(78);function Ce(){var e=Object(_e.a)(["\n  ",";\n  \n   html, body {\n    padding: 0;\n    margin: 0;\n    height: 100%;\n    min-height: 100%;\n    min-width: 100%;\n    width: 100%;\n    font-family: 'Roboto', 'Segoe UI',sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    overflow:hidden;\n    box-sizing: border-box;\n    *, *:before, *:after {\n    box-sizing: inherit;\n    touch-action: none;\n    -ms-touch-action: none;\n    }\n  }\n\n  code {\n    font-family: source-code-pro, monospace;\n  }\n"]);return Ce=function(){return e},e}var Re=Object(u.createGlobalStyle)(Ce(),Se.normalize),Ie=n(147),Fe=n(148),Ne=n(146),Pe=n(38),ze=n(79),Te={app:{colors:{main:{green:"#4fc775",blue:"#1a508b"}}}};var Me,$e=(Me=Object(Pe.a)({},Te),Object(ze.a)(Object(Pe.a)(Object(Pe.a)({},Me),Te))),Ae=function(e){var t=e.children;return Object(r.jsx)(Fe.b,{injectFirst:!0,children:Object(r.jsx)(Ne.a,{theme:$e,children:Object(r.jsx)(u.ThemeProvider,{theme:$e,children:t})})})};o.a.render(Object(r.jsxs)(C.a,{store:q,children:[Object(r.jsx)(Re,{}),Object(r.jsx)(Ie.a,{}),Object(r.jsx)(Ae,{children:Object(r.jsx)(c.Suspense,{fallback:"",children:Object(r.jsx)(ke,{})})})]}),document.getElementById("root"))},33:function(e,t,n){e.exports=n(48).wrap(n(125)()),e.exports.__esModule=!0}},[[126,1,2]]]);
//# sourceMappingURL=main.7efd50f8.chunk.js.map